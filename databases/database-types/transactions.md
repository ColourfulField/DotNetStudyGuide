При работе с БД часто используют термин "транзакция". **Транзакция **- это группа последовательных операций с БД, которая представляет собой логическую единицу работы с данными. Например, перед удалением поля из базы данных стоит также удалить все ключи, которые ссылаются на это поле. Если операция удаления ключа прошла успешно, а операция удаления - нет, то транзакция будет выполнена только частично, а состояние БД будет нарушено.

Для описания "хороших" транзакций был создан акроним ACID, который является сводом правил выполнения транзакций. Давайте опишем каждый из пунктов этого акронима:

* **Atomicity \(**атомарность\) - гарантирует, что никакая транзакция не будет зафиксирована в системе частично. Будут либо выполнены все её подоперации, либо не выполнено ни одной. Поскольку на практике невозможно одновременно и атомарно выполнить всю последовательность операций внутри транзакции, вводится понятие «отката» \(rollback\): если транзакцию не удаётся полностью завершить, результаты всех её до сих пор произведённых действий будут отменены и система вернётся во «внешне исходное» состояние — со стороны будет казаться, что транзакции и не было. \(Естественно, счётчики, индексы и другие внутренние структуры могут измениться, но, если СУБД запрограммирована без ошибок, это не повлияет на внешнее её поведение.
* **Сonsistency \(**согласованность\) - транзакция, достигающая своего нормального завершения \(EOT — end of transaction, завершение транзакции\) и, тем самым, фиксирующая свои результаты. Она сохраняет согласованность БД. Другими словами, каждая успешная транзакция по определению фиксирует только допустимые результаты. Это условие является необходимым для поддержки четвёртого свойства. Согласованность является более широким понятием. Например, в банковской системе может существовать требование равенства суммы, списываемой с одного счёта, сумме, зачисляемой на другой. Это бизнес-правило и оно не может быть гарантировано только проверками целостности, его должны учесть программисты при написании кода транзакций. Если какая-либо транзакция произведёт списание, но не произведёт зачисление, то система останется в некорректном состоянии и свойство согласованности будет нарушено. Наконец, ещё одно замечание касается того, что в ходе выполнения транзакции согласованность не требуется. В нашем примере, списание и зачисление будут, скорее всего, двумя разными подоперациями и между их выполнением внутри транзакции будет видно несогласованное состояние системы. Однако не нужно забывать, что при выполнении требования изоляции, никаким другим транзакциям эта несогласованность не будет видна. А атомарность гарантирует, что транзакция либо будет полностью завершена, либо ни одна из операций транзакции не будет выполнена. Тем самым эта промежуточная несогласованность является скрытой.**.**

* **Isolation \(**изолированность\) -  во время выполнения транзакций параллельные транзакции не должны оказывать влияние на её результат. Изолированность — требование дорогое, поэтому в реальных БД существуют режимы, не полностью изолирующие транзакцию. Уровни изоляции транзакций описаны ниже.

* **Durability \(**стойкость\) - независимо от проблем на нижних уровнях \(к примеру, обесточивание системы или сбой в оборудовании\) изменения, сделанные успешно завершённой транзакцией, должны остаться сохранёнными после возвращения системы в работу. Другими словами, если пользователь получил подтверждение от системы, что транзакция выполнена, он может быть уверен, что сделанные им изменения не будут отменены из-за какого-либо сбоя. Это правило осуществления транзакции должно быть гарантированно СУБД

Уровни изоляции транзакций в SQL Server: [https://msdn.microsoft.com/ru-ru/library/dn133175\(v=sql.120\).aspx](https://msdn.microsoft.com/ru-ru/library/dn133175%28v=sql.120%29.aspx)

